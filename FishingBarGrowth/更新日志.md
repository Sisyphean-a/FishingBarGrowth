# 更新日志 / Changelog

## Version 1.0.0 (2025-12-06)

### 新增功能 / New Features

#### 核心功能
- ✅ 实现钓鱼条无限增长机制
- ✅ 基于捕获总量的线性增长算法
- ✅ 精准的鱼类统计(自动过滤垃圾和藻类)
- ✅ 追溯既往捕获记录

#### HUD显示系统
- ✅ 手持鱼竿时显示钓鱼统计HUD
- ✅ 实时显示已钓鱼数
- ✅ 实时显示当前钓鱼条长度
- ✅ 显示基础长度和奖励长度分解
- ✅ 半透明背景,美观不遮挡
- ✅ 可自定义HUD位置

#### 配置系统
- ✅ 集成Generic Mod Config Menu
- ✅ 支持游戏内配置所有选项
- ✅ 主要设置:启用/禁用、每像素鱼数、最大高度、排除藻类
- ✅ HUD设置:显示开关、水平位置、垂直位置
- ✅ 调试设置:控制台调试信息

#### 技术实现
- ✅ 使用Harmony动态补丁BobberBar构造函数
- ✅ 使用HarmonyTargetMethod自动匹配构造函数
- ✅ 适配Stardew Valley 1.6 API
- ✅ 支持SerializableDictionary和ItemRegistry新API
- ✅ 完整的错误处理和日志记录

#### 多语言支持
- ✅ 中文翻译
- ✅ 英文翻译
- ✅ 所有UI文本支持i18n

### 技术细节 / Technical Details

#### 修复的问题
1. **Harmony补丁匹配失败**
   - 问题: 硬编码的构造函数参数类型无法匹配
   - 解决: 使用HarmonyTargetMethod动态获取构造函数
   
2. **Stardew Valley 1.6 API兼容**
   - 问题: fishCaught数据结构变化
   - 解决: 使用Pairs属性遍历SerializableDictionary
   
3. **物品数据获取**
   - 问题: Game1.objectInformation已移除
   - 解决: 使用ItemRegistry.GetDataOrErrorItem()

#### 性能优化
- 鱼类统计仅在钓鱼开始时计算一次
- HUD绘制仅在手持鱼竿时执行
- 使用缓存的纹理和字体

### 依赖项 / Dependencies

- **必需**: SMAPI 3.18.0+
- **必需**: Stardew Valley 1.6+
- **可选**: Generic Mod Config Menu

### 已知问题 / Known Issues

无

### 计划功能 / Planned Features

- [ ] 非线性增长曲线(对数/指数)
- [ ] 不同鱼类的权重系统
- [ ] 成就系统
- [ ] 自定义HUD样式
- [ ] 更多统计信息(稀有鱼、传说鱼等)

---

## 开发信息 / Development Info

- **开发者**: Xavier Nico
- **开发日期**: 2025-12-06
- **框架**: SMAPI 3.18.0+
- **目标平台**: .NET 6.0
- **游戏版本**: Stardew Valley 1.6+
- **许可证**: MIT License

## 致谢 / Credits

- SMAPI团队提供的优秀modding框架
- Harmony库实现运行时代码补丁
- Generic Mod Config Menu提供配置UI
- 星露谷物语modding社区的支持

